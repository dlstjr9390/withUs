<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>withUs</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script th:src="@{/js/clubPage.js}"></script>
    <script th:src="@{/js/getclub.js}"></script>
    <script th:src="@{/js/deleteclub.js}"></script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" th:href="@{/css/clubstyle.css}">

    <script th:inline="javascript">
        const host = 'http://' + window.location.host;
        var memberId;
        var isLogin;

        $(document).ready(function () {
            memberId = /*[[${memberId}]]*/ '';
            isLogin = /*[[${isLogin}]]*/ '';
            console.log(isLogin);
            console.log(memberId);

            if (isLogin === true) {
                $('#loginBtn').hide();
                $('#chatting').show();
                $('#myInfo').show();
                $('#logout').show();
                $('#create').show();
            } else {
                // memberId가 존재하지 않으면 로그인 버튼을 표시하고 채팅 이미지를 숨깁니다.
                $('#loginBtn').show();
                $('#chatting').hide();
                $('#myInfo').hide();
                $('#logout').hide();
                $('#create').hide();
            }

            $("#loginBtn").on("click", function(e) {
                window.location.href = host + '/api/member/loginPage';
            });

            $("#chatting").on("click", function(e) {
                window.location.href = host + '/api/chat/chatRoomList/' + memberId;
            });

            $("#myInfo").on("click", function(e) {
                window.location.href = host + '/api/member/profilePage/' + memberId;
            });

            $("#create").on("click", function(e) {
                window.location.href = host + '/api/club/post-club';
            });

            $("#logout").on("click", function(e) {
                var confirmLogout = window.confirm('로그아웃 하시겠습니까?');

                if (confirmLogout) {

                    $.ajax({
                        type: 'Post',
                        url: '/api/member/logout',
                        contentType: ''
                    })
                    .done(function (res, status, xhr) {
                        window.location.href = host + '/'
                    })
                    .fail(function (xhr, status, error) {
                        console.error('로그아웃 요청 API 에러', error);
                    })

                } else {
                    alert('로그아웃 취소');
                }

            });


        })
    </script>
</head>


<body>
<!-- section -->
<div class="main">
    <div class="title">
        <header>
            <div class="title-group" role="group">
                <div class="title1">
                    <h2 class="withUs" th:onclick="|location.href='@{/}'|">withUs</h2>
                </div>
                <div class="title2">
                    <img src="/img/message.png" id="chatting" class="chat-icon">
                    <h2 class="login" id="loginBtn">login</h2>
                    <img src="/img/create.png" id="create" class="create">
                    <img src="/img/myInfo.png" id="myInfo" class="my-info">
                    <img src="/img/logout.png" id="logout" class="logout">
                </div>
            </div>
        </header>
    </div>
</div>






<main>
    <div class="all-container">
        <section id="club-title">
            <div class=title-item>
                <article class="club">
                    <h2 class="club-title-name" >클럽 이름</h2>
                </article>
            </div>
            <div class="button-item">
                <article class="club-button-container1">
                    <button id="reviseButton">
                        수정
                    </button>

                </article>
                <article class="club-button-container2">
                    <button id="deleteButton">
                        삭제
                    </button>
                </article>
            </div>
        </section>

        <section id="notice-container">
            <h1 class="Noitce"> Notice </h1>
            <article class="Notice-container">
                <div class="category-list">
                    <div class="board-box">
                        게시글
                        <button class="board-button">
                            바로가기
                        </button>
                    </div>
                    <div class="notice-box">
                        공지사항
                    </div>
                </div>
            </article>
        </section>
        <section id="club-container">
            <div class="item1">
                <h1 class="club-introduce" >클럽소개</h1>
                <article class="Club-container">
                    <div class="club-introduce">
                        <div class="club-introduce-box">
                            소개 내용
                        </div>
                    </div>
                </article>
            </div>

            <div class="item2">
                <h1 class="date">날짜</h1>
                <article class="date-container">
                    <div class="start-time"></div>
                    <div class="end-time"></div>

                </article>
            </div>
            <div class="item3">
                <h4 class=invite>클럼 참가자</h4>
                <h5 class=invite-member>

                </h5>
            </div>
        </section>
    </div>

</main>
</body>

</html>
